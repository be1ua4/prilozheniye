<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Spirit Workout</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --primary: #00f2ff;
            --bg-dark: #0f0f11;
            --card-bg: rgba(255, 255, 255, 0.08);
            --text-main: #ffffff;
            --text-sec: #8b8b93;
            /* –ü–ª–∞–≤–Ω–∞—è —Ñ–∏–∑–∏–∫–∞ iOS */
            --ease-ios: cubic-bezier(0.2, 0.8, 0.2, 1);
        }
        body {
            background-color: var(--bg-dark);
            background-image: radial-gradient(circle at top right, rgba(0, 242, 255, 0.15), transparent 40%);
            color: var(--text-main);
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0; padding: 20px; padding-bottom: 90px;
            min-height: 100vh; box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            overflow-x: hidden; /* –£–±–∏—Ä–∞–µ–º –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π —Å–∫—Ä–æ–ª–ª */
            overscroll-behavior: none;
        }

        /* --- –û–ë–©–ò–ï –°–¢–ò–õ–ò --- */
        .hidden { display: none !important; }

        /* –ü–ª–∞–≤–Ω–æ–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫ */
        .tab-content { display: none; }
        .tab-content.active {
            display: block;
            animation: slideUpFade 0.5s var(--ease-ios) forwards;
        }

        @keyframes slideUpFade {
            from { opacity: 0; transform: translateY(20px) scale(0.98); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }

        /* --- –≠–ö–†–ê–ù –ó–ù–ê–ö–û–ú–°–¢–í–ê --- */
        #onboarding-screen {
            display: flex; flex-direction: column; justify-content: center; min-height: 90vh;
            animation: fadeIn 0.6s ease;
        }
        .input-group { margin-bottom: 15px; }
        .input-group label { display: block; margin-bottom: 5px; color: var(--text-sec); font-size: 14px; font-weight: 500; }
        .input-field, .select-field {
            width: 100%; padding: 15px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.1);
            background: rgba(0,0,0,0.3); color: white; font-size: 16px; box-sizing: border-box;
            outline: none; transition: all 0.3s var(--ease-ios);
        }
        .select-field { appearance: none; }
        .input-field:focus, .select-field:focus {
            border-color: var(--primary);
            box-shadow: 0 0 15px rgba(0, 242, 255, 0.15);
            transform: scale(1.01);
        }
        .save-btn {
            background: var(--primary); color: #000; width: 100%; padding: 16px; border-radius: 12px;
            font-weight: 800; font-size: 16px; border: none; margin-top: 20px; cursor: pointer;
            transition: transform 0.2s var(--ease-ios);
            text-transform: uppercase; letter-spacing: 0.5px;
        }
        .save-btn:active { transform: scale(0.95); opacity: 0.9; }

        /* --- –ö–ù–û–ü–ö–ê –ò–ò –ü–û–î–ë–û–†–ê --- */
        .ai-gen-btn {
            background: linear-gradient(135deg, #b000ff, #00f2ff);
            color: #fff; width: 100%; padding: 12px; border-radius: 12px;
            font-weight: 700; font-size: 14px; border: none; margin-bottom: 20px; cursor: pointer;
            transition: transform 0.2s var(--ease-ios);
            text-transform: uppercase; letter-spacing: 1px;
            box-shadow: 0 4px 15px rgba(176, 0, 255, 0.3);
            display: flex; align-items: center; justify-content: center; gap: 8px;
        }
        .ai-gen-btn:active { transform: scale(0.96); opacity: 0.9; }


        /* --- –ü–†–û–§–ò–õ–¨ --- */
        .profile-header { text-align: center; margin-bottom: 30px; }
        .avatar-big { font-size: 80px; margin-bottom: 10px; display: block; animation: float 6s ease-in-out infinite; }
        @keyframes float { 0% { transform: translateY(0px); } 50% { transform: translateY(-10px); } 100% { transform: translateY(0px); } }

        .stats-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 20px; }
        .stat-card { background: var(--card-bg); padding: 15px; border-radius: 16px; text-align: center; backdrop-filter: blur(10px); }
        .stat-val { font-size: 24px; font-weight: 800; color: var(--primary); display: block; }
        .stat-lbl { font-size: 12px; color: var(--text-sec); }

        .goal-card {
            background: linear-gradient(135deg, rgba(0,242,255,0.1), rgba(255,255,255,0.02));
            border: 1px solid rgba(0, 242, 255, 0.3);
            padding: 20px; border-radius: 16px; text-align: center; margin-bottom: 20px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
        }

        .dunk-calc-box {
            background: rgba(255,255,255,0.05); padding: 15px; border-radius: 12px; margin-top: 20px;
            border-left: 3px solid var(--primary); text-align: left;
        }

        /* --- –ö–ê–†–¢–û–ß–ö–ò (–° –£–õ–£–ß–®–ï–ù–ù–û–ô –ê–ù–ò–ú–ê–¶–ò–ï–ô) --- */
        .card {
            background: var(--card-bg); border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 16px; padding: 16px; margin-bottom: 12px;
            display: flex; justify-content: space-between; align-items: center;
            transition: all 0.3s var(--ease-ios);
            position: relative; overflow: hidden;
        }
        .card:active { transform: scale(0.97); background: rgba(255, 255, 255, 0.12); }

        .card-left { display: flex; align-items: center; gap: 15px; }
        .icon-box {
            font-size: 24px; width: 40px; height: 40px;
            background: rgba(0,0,0,0.3); border-radius: 12px;
            display: flex; align-items: center; justify-content: center;
        }

        /* –ß–ï–ö–ë–û–ö–° –° JELLY –≠–§–§–ï–ö–¢–û–ú */
        .checkbox {
            width: 28px; height: 28px;
            border: 2px solid var(--text-sec); border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            transition: all 0.3s var(--ease-ios);
        }
        .checkbox.checked {
            background: var(--primary); border-color: var(--primary);
            animation: jelly 0.6s;
        }
        .checkbox.checked::after { content: '‚úî'; color: #000; font-weight: bold; }

        @keyframes jelly {
            0% { transform: scale(1); }
            25% { transform: scale(1.25); }
            50% { transform: scale(0.9); }
            75% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        /* –ü–†–û–ì–†–ï–°–° –ë–ê–† –° GLOW –≠–§–§–ï–ö–¢–û–ú */
        .progress-container { width: 100%; height: 6px; background: rgba(255,255,255,0.1); border-radius: 10px; margin-bottom: 20px; overflow: hidden; }
        .progress-bar {
            height: 100%; width: 0%; background: var(--primary);
            transition: width 0.6s var(--ease-ios);
            box-shadow: 0 0 10px var(--primary);
            border-radius: 10px;
        }

        /* --- –ú–ï–ù–Æ --- */
        .bottom-nav {
            position: fixed; bottom: 20px; left: 20px; right: 20px; height: 65px;
            background: rgba(20, 20, 22, 0.85); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
            border-radius: 25px; border: 1px solid rgba(255,255,255,0.1);
            display: flex; justify-content: space-around; align-items: center; z-index: 100;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }
        .nav-item { display: flex; flex-direction: column; align-items: center; color: var(--text-sec); font-size: 10px; transition: 0.3s var(--ease-ios); opacity: 0.7; }
        .nav-item.active { opacity: 1; color: var(--primary); transform: translateY(-3px); text-shadow: 0 0 15px rgba(0,242,255,0.6); }
        .nav-icon { font-size: 22px; margin-bottom: 4px; }

        /* --- –¢–ê–ô–ú–ï–† –ò –ú–û–î–ê–õ–ö–ò --- */
        .timer-modal {
            position: fixed; bottom: -100%; left: 0; width: 100%;
            background: #1c1c1e; border-radius: 30px 30px 0 0;
            padding: 20px; box-sizing: border-box;
            transition: bottom 0.5s cubic-bezier(0.19, 1, 0.22, 1);
            text-align: center;
            border-top: 1px solid var(--primary);
            z-index: 2000;
            display: flex; flex-direction: column; align-items: center;
            box-shadow: 0 -10px 50px rgba(0,0,0,0.8);

            /* üî• –≠–¢–û –°–ê–ú–û–ï –í–ê–ñ–ù–û–ï: –û–¢–ö–õ–Æ–ß–ê–ï–¢ –°–ö–†–û–õ–õ –ë–†–ê–£–ó–ï–†–ê –ü–†–ò –ö–ê–°–ê–ù–ò–ò */
            touch-action: none;
        }
        .timer-modal.active { bottom: 0; }

        .modal-handle {
            width: 50px;
            height: 5px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            margin-bottom: 20px; /* –û—Ç—Å—Ç—É–ø –¥–æ –∫–∞—Ä—Ç–∏–Ω–∫–∏ */
            flex-shrink: 0;
        }
        #exercise-gif {
            width: 100%; max-width: 320px; height: 200px;
            object-fit: cover; border-radius: 20px;
            margin-bottom: 15px; background: #000;
            border: 1px solid rgba(255,255,255,0.1);
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        /* üî• –í–ê–ñ–ù–û: –≠–¢–ê –°–¢–†–û–ö–ê –ß–ò–ù–ò–¢ –°–í–ê–ô–ü –ü–û –ö–ê–†–¢–ò–ù–ö–ï */
            pointer-events: none;
            user-select: none;
        }

        .btn-skip {
            background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.2);
            color: #ffffff; padding: 14px 40px; border-radius: 40px; font-size: 16px; font-weight: 600;
            cursor: pointer; margin-top: 15px; backdrop-filter: blur(5px);
            transition: all 0.2s var(--ease-ios);
            -webkit-appearance: none;
        }
        .btn-skip:active { background: rgba(255, 255, 255, 0.3); transform: scale(0.92); }

        /* --- –≠–ö–†–ê–ù –£–°–ü–ï–•–ê --- */
        #success-screen {
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            height: 80vh; text-align: center; animation: zoomIn 0.5s var(--ease-ios);
        }
        .success-icon { font-size: 80px; margin-bottom: 20px; animation: bounceIn 0.8s; }
        .success-title { font-size: 28px; font-weight: 800; margin: 0 0 10px 0; background: linear-gradient(to right, #fff, #8b8b93); -webkit-background-clip: text; -webkit-text-fill-color: transparent;}
        .success-text { color: var(--text-sec); margin-bottom: 30px; }
        .xp-reward {
            background: rgba(0, 242, 255, 0.15); color: var(--primary);
            padding: 12px 30px; border-radius: 20px; font-weight: 800; font-size: 24px;
            border: 1px solid var(--primary);
            box-shadow: 0 0 20px rgba(0, 242, 255, 0.3);
            animation: glow 2s infinite alternate;
            margin-bottom: 10px;
        }
        /* --- AI BADGE STYLE --- */
        .ai-badge {
            background: linear-gradient(135deg, #00f2ff, #b000ff);
            color: white;
            font-size: 10px;
            font-weight: 800;
            padding: 3px 8px;
            border-radius: 6px;
            margin-left: 8px;
            text-transform: uppercase;
            box-shadow: 0 0 10px rgba(0, 242, 255, 0.4);
            animation: pulseBadge 2s infinite;
            vertical-align: middle;
            border: 1px solid rgba(255,255,255,0.3);
        }

        @keyframes pulseBadge {
            0% { box-shadow: 0 0 10px rgba(0, 242, 255, 0.4); }
            50% { box-shadow: 0 0 20px rgba(176, 0, 255, 0.6); }
            100% { box-shadow: 0 0 10px rgba(0, 242, 255, 0.4); }
        }

        /* –ù–û–í–´–ô –°–¢–ò–õ–¨ –î–õ–Ø –ü–†–ò–ë–ê–í–ö–ò –ö –ü–†–´–ñ–ö–£ */
        .jump-reward {
            color: #00ff00; font-size: 18px; font-weight: bold;
            margin-top: 5px; text-shadow: 0 0 10px rgba(0,255,0,0.5);
            animation: slideUpFade 1s ease 0.5s both; /* –ü–æ—è–≤–ª—è–µ—Ç—Å—è —á—É—Ç—å –ø–æ–∑–∂–µ */
        }

        @keyframes zoomIn { from { opacity: 0; transform: scale(0.8); } to { opacity: 1; transform: scale(1); } }
        @keyframes bounceIn { 0% { transform: scale(0); } 60% { transform: scale(1.2); } 100% { transform: scale(1); } }
        @keyframes glow { from { box-shadow: 0 0 10px rgba(0, 242, 255, 0.2); } to { box-shadow: 0 0 30px rgba(0, 242, 255, 0.6); } }

        /* –°–ï–†–ò–Ø (STREAK) –í –®–ê–ü–ö–ï */
        .streak-badge {
            display: flex; align-items: center; gap: 5px;
            background: rgba(255, 87, 34, 0.15); border: 1px solid rgba(255, 87, 34, 0.5);
            padding: 6px 14px; border-radius: 30px;
            color: #ff5722; font-weight: 800; font-size: 14px;
            box-shadow: 0 0 10px rgba(255, 87, 34, 0.1);
        }

        /* –ö–ù–û–ü–ö–ê –û–ë–ù–û–í–õ–ï–ù–ò–Ø –õ–ò–î–ï–†–ë–û–†–î–ê */
        .refresh-btn {
            background: transparent;
            border: 1px solid var(--text-sec);
            color: var(--text-sec);
            padding: 8px 16px;
            border-radius: 20px;
            margin-top: 20px;
            width: 100%;
            cursor: pointer;
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.3s ease;
        }
        .refresh-btn:active {
            background: rgba(255,255,255,0.1);
            border-color: #fff;
            color: #fff;
        }

        /* --- –°–¢–ò–õ–ò –î–õ–Ø –í–ö–õ–ê–î–ö–ò JUMP --- */
        .jump-header { text-align: center; margin-bottom: 20px; }
        .jump-main-val { font-size: 48px; font-weight: 800; color: var(--primary); text-shadow: 0 0 20px rgba(0,242,255,0.3); }
        .jump-gain-lbl { color: #00ff00; font-weight: bold; background: rgba(0,255,0,0.1); padding: 5px 10px; border-radius: 10px; display: inline-block; margin-top: 5px; }

        .rim-visual {
            position: relative; height: 300px; background: rgba(255,255,255,0.05);
            border-radius: 16px; margin-top: 20px; border: 1px solid rgba(255,255,255,0.1);
            overflow: hidden;
        }
        .rim-line {
            position: absolute; top: 0; left: 0; width: 100%; height: 2px; background: #ff5722;
            box-shadow: 0 0 10px #ff5722; z-index: 2;
        }
        .rim-text { position: absolute; top: 5px; right: 10px; color: #ff5722; font-size: 10px; font-weight: bold; }

        .player-jump-bar {
            position: absolute; bottom: 0; left: 20%; width: 60%;
            background: linear-gradient(to top, var(--primary), #ffffff);
            border-radius: 10px 10px 0 0;
            transition: height 1s cubic-bezier(0.19, 1, 0.22, 1);
            box-shadow: 0 0 20px rgba(0,242,255,0.3);
        }
        /* --- DUOLINGO STYLE PATH --- */
        .duo-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px 0;
            position: relative;
            overflow: visible; /* –ß—Ç–æ–±—ã —Ç–µ–Ω–∏ –Ω–µ –æ–±—Ä–µ–∫–∞–ª–∏—Å—å */
        }

        /* –°—Ç—Ä–æ–∫–∞ —Å —É–∑–ª–æ–º (—É—Ä–æ–≤–Ω–µ–º) */
        .duo-row {
            position: relative;
            width: 100%;
            height: 100px; /* –í—ã—Å–æ—Ç–∞ —à–∞–≥–∞ */
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2;
        }

        /* –°–º–µ—â–µ–Ω–∏—è –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∞ –∏–∑–≤–∏–ª–∏—Å—Ç–æ–π —Ç—Ä–æ–ø—ã */
        .duo-row.pos-center { justify-content: center; }
        .duo-row.pos-left { justify-content: flex-start; padding-left: 20%; }
        .duo-row.pos-right { justify-content: flex-end; padding-right: 20%; }

        /* –°–∞–º –£–∑–µ–ª (–ö—Ä—É–≥–ª–∞—è –∫–Ω–æ–ø–∫–∞) */
        .duo-node {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 30px;
            position: relative;
            cursor: pointer;
            transition: all 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275); /* –ü—Ä—É–∂–∏–Ω–∏—Å—Ç—ã–π —ç—Ñ—Ñ–µ–∫—Ç */

            /* 3D —ç—Ñ—Ñ–µ–∫—Ç –∫–Ω–æ–ø–∫–∏ */
            background: #2b2b2e;
            box-shadow: 0 6px 0 #1a1a1c;
            border: 4px solid #3a3a3e;
            color: #555;
        }

        /* –°–û–°–¢–û–Ø–ù–ò–ï: –ê–ö–¢–ò–í–ù–´–ô (–¢–µ–∫—É—â–µ–µ –∑–∞–¥–∞–Ω–∏–µ) */
        .duo-node.active {
            background: var(--primary);
            box-shadow: 0 6px 0 #00bfcc; /* –¢–µ–Ω—å —Ç–µ–º–Ω–µ–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ü–≤–µ—Ç–∞ */
            border-color: #ffffff;
            color: #000;
            transform: scale(1.1);
            animation: bounce 2s infinite;
        }

        /* –°–û–°–¢–û–Ø–ù–ò–ï: –ó–ê–í–ï–†–®–ï–ù–û */
        .duo-node.done {
            background: #ffd700; /* –ó–æ–ª–æ—Ç–æ–π */
            box-shadow: 0 6px 0 #d4b200;
            border-color: #fffacD;
            color: #8a6d00;
        }
        .duo-node.done::after {
            content: 'üëë';
            position: absolute;
            bottom: -10px;
            right: -5px;
            font-size: 20px;
        }

        /* –≠—Ñ—Ñ–µ–∫—Ç –Ω–∞–∂–∞—Ç–∏—è */
        .duo-node:active {
            transform: translateY(6px); /* –ö–Ω–æ–ø–∫–∞ –≤–¥–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è */
            box-shadow: 0 0 0 transparent;
        }

        /* –ü—É–Ω–∫—Ç–∏—Ä–Ω–∞—è –ª–∏–Ω–∏—è (–¢—Ä–æ–ø–∏–Ω–∫–∞) */
        .path-connector {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 80px;
            height: 100px;
            border-left: 6px dashed rgba(255, 255, 255, 0.1);
            z-index: 1;
            transform-origin: top left;
            pointer-events: none;
        }

        /* –•–∏—Ç—Ä—ã–µ –ø–æ–≤–æ—Ä–æ—Ç—ã –ª–∏–Ω–∏–π (SVG –±—ã–ª –±—ã –ª—É—á—à–µ, –Ω–æ CSS –ø—Ä–æ—â–µ –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏) */
        /* –õ–∏–Ω–∏—è –∏–∑ —Ü–µ–Ω—Ç—Ä–∞ –≤–ª–µ–≤–æ */
        .path-c-to-l { transform: rotate(25deg) translate(0px, 10px); height: 110px; }
        /* –õ–∏–Ω–∏—è —Å–ª–µ–≤–∞ –≤ —Ü–µ–Ω—Ç—Ä */
        .path-l-to-c { transform: rotate(-25deg) translate(0px, 10px); height: 110px; }
        /* –õ–∏–Ω–∏—è –∏–∑ —Ü–µ–Ω—Ç—Ä–∞ –≤–ø—Ä–∞–≤–æ */
        .path-c-to-r { transform: rotate(-25deg) translate(0px, 10px); height: 110px; }
        /* –õ–∏–Ω–∏—è —Å–ø—Ä–∞–≤–∞ –≤ —Ü–µ–Ω—Ç—Ä */
        .path-r-to-c { transform: rotate(25deg) translate(0px, 10px); height: 110px; }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {transform: scale(1.1);}
            40% {transform: scale(1.1) translateY(-10px);}
            60% {transform: scale(1.1) translateY(-5px);}
        }

        /* –û–±–ª–∞—á–∫–æ —Å —Ç–µ–∫—Å—Ç–æ–º –Ω–∞–¥ –∞–∫—Ç–∏–≤–Ω—ã–º —É—Ä–æ–≤–Ω–µ–º */
        .speech-bubble {
            position: absolute;
            top: -45px;
            background: white;
            color: black;
            padding: 5px 10px;
            border-radius: 10px;
            font-size: 12px;
            font-weight: bold;
            white-space: nowrap;
            animation: floatBubble 2s ease-in-out infinite;
            z-index: 10;
        }
        .speech-bubble::after {
            content: '';
            position: absolute;
            bottom: -5px; left: 50%; margin-left: -5px;
            border-width: 5px 5px 0;
            border-style: solid;
            border-color: white transparent;
        }
        @keyframes floatBubble { 0%, 100% {transform: translateY(0);} 50% {transform: translateY(-5px);} }
        .player-val-text {
            position: absolute; top: -25px; width: 100%; text-align: center;
            font-weight: bold; color: white; font-size: 12px;
        }
        /* --- –°–¢–ò–õ–ò –î–õ–Ø –ö–û–†–û–ù (CROWNS) --- */
        .node-wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            z-index: 5; /* –ß—Ç–æ–±—ã –±—ã–ª–æ –≤—ã—à–µ –ª–∏–Ω–∏–π */
        }

        .crowns-row {
            display: flex;
            gap: 4px; /* –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É –∫–æ—Ä–æ–Ω–∞–º–∏ */
            margin-top: 8px; /* –û—Ç—Å—Ç—É–ø –æ—Ç –∫—Ä—É–∂–∫–∞ –≤–Ω–∏–∑ */
            background: rgba(0, 0, 0, 0.4); /* –ü–æ–¥–ª–æ–∂–∫–∞ –¥–ª—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏ */
            padding: 2px 6px;
            border-radius: 10px;
        }

        .crown-icon {
            font-size: 12px;
            opacity: 0.2; /* –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ç—É—Å–∫–ª–∞—è */
            filter: grayscale(100%);
            transition: all 0.3s ease;
        }

        .crown-icon.earned {
            opacity: 1;
            filter: grayscale(0%);
            text-shadow: 0 0 5px gold;
            transform: scale(1.2);
        }
    </style>
</head>
<body>

    <audio id="sound-click" src="https://assets.mixkit.co/active_storage/sfx/2568/2568-preview.mp3"></audio>
    <audio id="sound-win" src="https://assets.mixkit.co/active_storage/sfx/1435/1435-preview.mp3"></audio>

    <div id="onboarding-screen" class="hidden">
        <h1 style="text-align: center; margin-bottom: 20px;">–ö–∞—Ä—Ç–æ—á–∫–∞ –ê—Ç–ª–µ—Ç–∞ ü™™</h1>

        <div class="input-group">
            <label>–¢–≤–æ—è —Ü–µ–ª—å</label>
            <select id="in-goal" class="select-field">
                <option value="Vertical Jump">–í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π –ø—Ä—ã–∂–æ–∫ üöÄ</option>
                <option value="Athleticism">–û–±—â–∏–π –∞—Ç–ª–µ—Ç–∏–∑–º üí™</option>
                <option value="Broad Jump">–ü—Ä—ã–∂–æ–∫ –≤ –¥–ª–∏–Ω—É üêÜ</option>
            </select>
        </div>

        <div class="input-group">
            <label>–¢–≤–æ–π –æ–ø—ã—Ç</label>
            <select id="in-bg" class="select-field">
                <option value="Beginner">–ù–æ–≤–∏—á–æ–∫ (0-6 –º–µ—Å)</option>
                <option value="Intermediate">–°—Ä–µ–¥–Ω–∏–π (6-12 –º–µ—Å)</option>
                <option value="Advanced">–ü—Ä–æ—Ñ–∏ (>1 –≥–æ–¥–∞)</option>
            </select>
        </div>
        <div class="stats-grid">
            <div class="input-group"><label>–†–æ—Å—Ç (—Å–º)</label><input type="number" id="in-height" class="input-field" placeholder="180"></div>
            <div class="input-group"><label>–í–µ—Å (–∫–≥)</label><input type="number" id="in-weight" class="input-field" placeholder="75"></div>
        </div>
        <div class="stats-grid">
            <div class="input-group"><label>–ü—Ä—ã–∂–æ–∫ (—Å–º)</label><input type="number" id="in-jump" class="input-field" placeholder="50"></div>
            <div class="input-group"><label>–ö–∞—Å–∞–Ω–∏–µ —Å—Ç–æ—è (—Å–º)</label><input type="number" id="in-reach" class="input-field" placeholder="230"></div>
        </div>
        <button class="save-btn" onclick="saveProfile()">–°–û–•–†–ê–ù–ò–¢–¨ –ü–†–û–§–ò–õ–¨</button>
    </div>

    <div id="main-app">
        <div id="tab-workout" class="tab-content active">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <div><span id="day-display" style="color:var(--primary); font-size: 14px; font-weight:600; letter-spacing:1px;">–î–ï–ù–¨ 1</span><h1 style="margin:0; font-size:32px;">–ù–µ–¥–µ–ª—è <span id="week-num">1</span></h1></div>
                <div class="streak-badge">
                    <span>üî•</span>
                    <span id="streak-display">0</span>
                </div>
            </div>
            <div class="progress-container"><div class="progress-bar" id="progress"></div></div>

            <button class="ai-gen-btn" onclick="generateAIWorkout()">‚ú® –ò–ò –ü–æ–¥–±–æ—Ä —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏</button>

            <div id="exercise-list"></div>
        </div>
        <div id="workout-modal-screen" class="hidden" style="position:fixed; top:0; left:0; width:100%; height:100%; background:var(--bg-dark); z-index:1000; padding:20px; box-sizing:border-box; overflow-y:auto;">

            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px;">
                <button onclick="closeWorkoutModal()" style="background:transparent; border:none; color:white; font-size:24px;">‚úï</button>
                <h2 id="modal-title" style="margin:0;">–ù–µ–¥–µ–ª—è X</h2>
                <div style="width:24px;"></div> </div>

            <div style="text-align:center; margin-bottom:20px;">
                <span class="ai-badge" style="font-size:14px; padding:5px 15px;">–î–µ–Ω—å <span id="modal-day-display">1</span> / 3</span>
            </div>

            <div class="progress-container"><div class="progress-bar" id="modal-progress"></div></div>
            <div id="modal-exercise-list" style="padding-bottom: 50px;"></div>

            <div id="modal-finish-btn-area"></div>
        </div>
        <div id="tab-leaderboard" class="tab-content">
            <h2 style="text-align: center;">–¢–æ–ø –ê—Ç–ª–µ—Ç–æ–≤</h2>
            <div class="card"><div class="card-left"><b>#1</b> Beast_Mode</div><div>5200 XP</div></div>
            <div class="card"><div class="card-left"><b>#2</b> Air_Jordan</div><div>4800 XP</div></div>
            <div class="card" style="border-color: var(--primary);"><div class="card-left"><b>–í—ã</b> <span id="leader-name"></span></div><div id="leader-xp"></div></div>

            <button class="refresh-btn" onclick="refreshData()">üîÑ –û–±–Ω–æ–≤–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É</button>
        </div>

        <div id="tab-jump" class="tab-content">
            <h2 style="text-align: center;">–ú–æ–π –ü—Ä—ã–∂–æ–∫</h2>
            <div class="jump-header">
                <div class="jump-main-val"><span id="jump-tab-val">0</span> —Å–º</div>
                <div class="jump-gain-lbl" id="jump-tab-gain">+0.0 —Å–º</div>
            </div>

            <div class="rim-visual">
                <div class="rim-line"><span class="rim-text">305 —Å–º (–ö–æ–ª—å—Ü–æ)</span></div>
                <div class="player-jump-bar" id="rim-bar">
                    <div class="player-val-text">You</div>
                </div>
            </div>

            <div style="margin-top:20px; font-size:12px; color:var(--text-sec); text-align:center;">
                –ü—Ä–æ–≥—Ä–µ—Å—Å —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤—ã—Å–æ—Ç—ã –∫–∞—Å–∞–Ω–∏—è + –ø—Ä—ã–∂–∫–∞.
            </div>
        </div>

        <div id="tab-profile" class="tab-content">
            <div class="profile-header">
                <span class="avatar-big">ü•ã</span><h2 id="profile-name">–ê—Ç–ª–µ—Ç</h2>
                <div class="goal-card"><div style="font-size: 12px; text-transform: uppercase; color: var(--text-sec); margin-bottom: 5px;">–¢–µ–∫—É—â–∞—è —Ü–µ–ª—å</div><div id="display-goal" style="font-size: 18px; font-weight: bold;">–°—Ç–∞—Ç—å –≤—ã—à–µ</div></div>
            </div>
            <div class="stats-grid">
                <div class="stat-card"><span class="stat-val" id="display-height">0</span><span class="stat-lbl">–†–æ—Å—Ç</span></div>
                <div class="stat-card"><span class="stat-val" id="display-jump">0</span><span class="stat-lbl">–ü—Ä—ã–∂–æ–∫</span></div>
                <div class="stat-card"><span class="stat-val" id="display-reach">0</span><span class="stat-lbl">–ö–∞—Å–∞–Ω–∏–µ</span></div>
                <div class="stat-card"><span class="stat-val" id="display-bg">Beginner</span><span class="stat-lbl">–û–ø—ã—Ç</span></div>
            </div>
            <div class="dunk-calc-box">
                <div style="color:white; font-weight:bold; margin-bottom:5px;">üèÄ –ü—É—Ç—å –∫ –î–∞–Ω–∫—É</div>
                <div id="dunk-math" style="font-size:13px; color:var(--text-sec);">
                    –ö–æ–ª—å—Ü–æ: 305 —Å–º<br>
                    –¢–≤–æ–π –º–∞–∫—Å–∏–º—É–º: <span id="calc-touch" style="color:var(--primary)">0</span> —Å–º<br>
                    –ù–µ —Ö–≤–∞—Ç–∞–µ—Ç: <span id="calc-need" style="color:#ff4d4d">0</span> —Å–º
                </div>
            </div>
            <div class="stat-card" style="text-align: left; display: flex; justify-content: space-between; margin-top:15px;"><span>‚ö° –í—Å–µ–≥–æ XP</span><span id="display-xp" style="color:white; font-weight: bold;">0</span></div>
        </div>

        <div id="success-screen" class="hidden">
            <div class="success-icon">üéâ</div>
            <h1 class="success-title">–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –æ–∫–æ–Ω—á–µ–Ω–∞!</h1>
            <p class="success-text">–û—Ç–ª–∏—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞, –∞—Ç–ª–µ—Ç.</p>
            <div class="xp-reward">+50 XP</div>

            <div id="jump-gain-display" class="jump-reward"></div>

            <p style="margin-top: 40px; font-size: 12px; opacity: 0.5;">–ù–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É –≤–Ω–∏–∑—É, —á—Ç–æ–±—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å</p>
        </div>
    </div>

    <nav class="bottom-nav" id="nav-bar">
        <div class="nav-item active" onclick="switchTab('tab-workout', this)"><div class="nav-icon">üí™</div><div>Work</div></div>
        <div class="nav-item" onclick="switchTab('tab-leaderboard', this)"><div class="nav-icon">üèÜ</div><div>Top</div></div>
        <div class="nav-item" onclick="switchTab('tab-jump', this)"><div class="nav-icon">ü¶ò</div><div>Jump</div></div>
        <div class="nav-item" onclick="switchTab('tab-profile', this)"><div class="nav-icon">üë§</div><div>Me</div></div>
    </nav>

    <div class="timer-modal" id="timerModal">
        <div class="modal-handle"></div>

        <img id="exercise-gif" src="" alt="Demo">
        <div class="timer-display" id="timerValue" style="font-size: 48px; font-weight: bold; margin: 20px 0;">01:00</div>
        <button class="btn-skip" onclick="stopTimer()">–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å</button>
    </div>

    <script src="data.js"></script>
    <script src="script.js"></script>
</body>
</html>